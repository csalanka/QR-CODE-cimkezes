<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Adatbázis Címkekezelő</title>
    <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f7f7f7;
        }
        /* Tab-stílusok */
        .tabs {
            display: flex;
            background-color: #4CAF50;
            padding: 10px 0;
            justify-content: center;
        }

        .tab {
            padding: 10px 20px;
            cursor: pointer;
            color: white;
            background-color: #4CAF50;
            border: none;
            font-size: 16px;
        }

        .tab:hover {
            background-color: #45a049;
        }

        .tab-content {
            display: none;
            padding: 20px;
        }

        .active {
            background-color: #45a049;
            display: block;
        }

        .cimke {
            width: 60mm;
            height: 30mm;
            padding: 3mm;
            border: 1px solid black;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-family: Arial, sans-serif;
            font-size: 10px;
            position: relative;
        }

        .qr-container {
            width: 25mm;
            height: 25mm;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-left: -3mm;
        }

        .szoveg-container {
            max-width: 60%;
            text-align: center;
            line-height: 1.5;
            padding-left: 5mm;
        }

        .szam {
            font-weight: bold;
            font-size: 14px;
            margin-bottom: 5px;
        }

        .szoveg {
            max-width: 100%;
            text-align: center;
            line-height: 1.5;
            padding-left: 5mm;
        }

        .version-info {
            text-align: center;
            margin-top: 20px;
        }

        #version-history-popup {
            display: none;
            background-color: #fff;
            padding: 20px;
            border: 1px solid #ccc;
            max-width: 500px;
            margin: 20px auto;
        }

        #version-history-popup h3 {
            margin-top: 0;
        }

        #version-history-popup ul {
            list-style-type: none;
            padding-left: 0;
        }

        #version-history-popup li {
            margin-bottom: 10px;
        }
    </style>
</head>
<body>

    <!-- Tabs -->
    <div class="tabs">
        <button class="tab" onclick="openTab(event, 'qr-code')">QR Kód Generálás</button>
        <button class="tab" onclick="openTab(event, 'cimke-olasas')">Címke Olvasás</button>
        <button class="tab" onclick="openTab(event, 'foglalasi-lista')">Foglalási Lista</button>
        <button class="tab" onclick="openTab(event, 'help')">Segítség</button>
    </div>

    <!-- Tab Contents -->
    <div id="qr-code" class="tab-content">
        <h1>QR Kódos Címke Generálás</h1>
        <label for="text-input">Szöveg (Anyagszám + leírás):</label>
        <input type="text" id="text-input" placeholder="Pl.: 7004567 Leírás" maxlength="60">
        <button onclick="generateQRCode()">QR Kód Generálás</button>
        <br><br>

        <!-- Címke megjelenítése -->
        <div class="cimke">
            <div class="qr-container">
                <canvas id="qrcode"></canvas>
            </div>
            <div class="szoveg-container">
                <div id="szam" class="szam"></div>
                <div id="szoveg" class="szoveg"></div>
            </div>
        </div>

        <div id="char-count" style="margin-top: 10px;">Még <span id="remaining-chars">60</span> karakter maradt.</div>
    </div>

    <div id="cimke-olasas" class="tab-content">
        <h1>Címke Olvasás (Foglalás)</h1>
        <p>Ide jön a Címke Olvasás funkció leírása.</p>
    </div>

    <div id="foglalasi-lista" class="tab-content">
        <h1>Foglalási Lista</h1>
        <p>Ide jön a Foglalási Lista funkció leírása.</p>
    </div>

    <div id="help" class="tab-content">
        <h1>Segítség</h1>
        <p>Itt található a funkciók rövid leírása.</p>
    </div>

    <!-- Verziószám és történet -->
    <div class="version-info">
        <p>Verzió: <span id="version-number">2.0</span></p>
        <button onclick="showVersionHistory()">Verzió Történet</button>
    </div>

    <div id="version-history-popup">
        <h3>Verzió Történet</h3>
        <ul>
            <li><strong>2.0</strong> – Új lapok hozzáadása (Címke generálás, Foglalási lista), dizájn színesítése, verzió kezelés.</li>
            <li><strong>1.1</strong> – QR kódok testreszabása, szövegkezelés fejlesztése.</li>
            <li><strong>1.0</strong> – Alap QR kód generálás.</li>
        </ul>
        <button onclick="closeVersionHistory()">Bezárás</button>
    </div>

    <script>
        // Tabok kezelése
        function openTab(evt, tabName) {
            var i, tabcontent, tablinks;
            tabcontent = document.getElementsByClassName("tab-content");
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].style.display = "none";
            }
            tablinks = document.getElementsByClassName("tab");
            for (i = 0; i < tablinks.length; i++) {
                tablinks[i].className = tablinks[i].className.replace(" active", "");
            }
            document.getElementById(tabName).style.display = "block";
            evt.currentTarget.className += " active";
        }

        // QR kód generálása
        function generateQRCode() {
            var text = document.getElementById("text-input").value;

            if (!text) {
                alert("Kérlek, írj be valamilyen szöveget!");
                return;
            }

            // Első szó (szám) és a többi különválasztása
            var parts = text.split(" ");
            var numberPart = parts.shift(); // Első szó (szám)
            var textPart = parts.join(" "); // A maradék szöveg

            // Beállítás a címkén
            document.getElementById("szam").textContent = numberPart;
            document.getElementById("szoveg").textContent = textPart;

            // QR-kód generálása
            QRCode.toCanvas(document.getElementById("qrcode"), text, function(error) {
                if (error) {
                    console.error("QR Kód generálási hiba:", error);
                    alert("Hiba történt a QR-kód generálása közben.");
                } else {
                    console.log("QR kód generálva!");
                }
            });
        }

        // Karakterek számlálása
        document.getElementById("text-input").addEventListener("input", function() {
            var maxChars = 60;
            var remainingChars = maxChars - this.value.length;
            document.getElementById("remaining-chars").textContent = remainingChars;

            if (remainingChars < 0) {
                alert("Túl sok karakter! Kérlek, csökkentsd a hosszúságot.");
            }
        });

        // Verziótörténet
        function showVersionHistory() {
            document.getElementById('version-history-popup').style.display = 'block';
        }

        function closeVersionHistory() {
            document.getElementById('version-history-popup').style.display = 'none';
        }

        // Alapértelmezett lap megnyitása
        document.getElementsByClassName("tab")[0].click();
    </script>

</body>
</html>
